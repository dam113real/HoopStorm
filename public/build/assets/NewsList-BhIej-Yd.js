import{Q as B,r as o,b as f,d,o as n,a as y,e,w,f as H,g as k,v as _,F as N,h as V,i as C,t as Q,O as x}from"./app-Cg5WBZFx.js";const R={class:"p-3 sm:p-5"},G={class:"relative z-0 w-full mb-6 group"},J={class:"grid md:gap-6"},K={class:"relative z-0 w-full mb-6 group"},W={class:"grid md:gap-6"},X={class:"relative z-0 w-full mb-6 group"},Y={class:"grid md:gap-6"},Z={class:"relative z-0 w-full mb-6 group"},ee={class:"flex flex-nowrap mb-8"},te=["src"],re={class:"absolute top-0 right-8 transform -translate-y-1/2 w-3.5 h-3.5 bg-red-400 border-2 border-white dark:border-gray-800 rounded-full"},ae=["onClick"],oe={class:"mx-auto max-w-screen-xl px-4 lg:px-12"},se={class:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden"},le={class:"overflow-x-auto"},de={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},ne={scope:"row",class:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white"},ie={class:"px-4 py-3"},ue={key:0,type:"button",class:"px-3 py-2 text-xs font-medium text-center text-white bg-green-700 rounded-lg hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800"},ce={key:1,type:"button",class:"px-3 py-2 text-xs font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"},ge={class:"px-4 py-3 flex items-center justify-end"},pe=["id","data-dropdown-toggle"],be=["id"],fe=["aria-labelledby"],ye=["onClick"],xe={class:"py-1"},he=["onClick"],ve={__name:"NewsList",props:{news:Array},setup(A){B().props.brands,B().props.categories;const S=o(!1),b=o(!1),s=o(!1),i=o([]),z=o(""),D=r=>{console.log(r),i.value.push(r)},P=r=>{z.value=r.url,s.value=!0},$=r=>{console.log(r)},h=o(""),u=o(""),c=o(""),g=o(""),m=o([]);o("");const T=(r,t)=>{console.log(r,t),h.value=r.id,u.value=r.title,c.value=r.description,g.value=r.extrainfo,m.value=r.news_images,b.value=!0,S.value=!1,s.value=!0},U=()=>{S.value=!0,s.value=!0,b.value=!1},L=async()=>{const r=new FormData;r.append("title",u.value),r.append("description",c.value),r.append("extrainfo",g.value);for(const t of i.value)r.append("news_images[]",t.raw);try{await x.post("news/store",r,{onSuccess:t=>{Swal.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:t.props.flash.success}),s.value=!1,M()}})}catch(t){console.log(t)}},M=()=>{h.value="",u.value="",c.value="",g.value="",i.value=[],z.value=""},F=async(r,t)=>{try{await x.delete("/admin/news/image/"+r.id,{onSuccess:l=>{m.value.splice(t,1),Swal.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:l.props.flash.success})}})}catch(l){console.log(l)}},E=async()=>{const r=new FormData;r.append("title",u.value),r.append("description",c.value),r.append("extrainfo",g.value),r.append("_method","PUT");for(const t of i.value)r.append("news_images[]",t.raw);try{await x.post("news/update/"+h.value,r,{onSuccess:t=>{s.value=!1,M(),Swal.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:t.props.flash.success})}})}catch(t){console.log(t)}},I=(r,t)=>{Swal.fire({title:"Are you Sure",text:"This actions cannot undo!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"no",confirmButtonText:"yes, delete!"}).then(l=>{if(l.isConfirmed)try{x.delete("news/destory/"+r.id,{onSuccess:p=>{this.delete(r,t),Swal.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:p.props.flash.success})}})}catch(p){console.log(p)}})};return(r,t)=>{const l=f("Plus"),p=f("el-icon"),q=f("el-upload"),O=f("el-dialog");return n(),d("section",R,[y(O,{modelValue:s.value,"onUpdate:modelValue":t[5]||(t[5]=a=>s.value=a),title:b.value?"Edit news":"Add News",width:"30%","before-close":r.handleClose},{default:w(()=>[e("form",{onSubmit:t[4]||(t[4]=H(a=>b.value?E():L(),["prevent"]))},[e("div",G,[k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),type:"text",name:"floating_title",id:"floating_title",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:""},null,512),[[_,u.value]]),t[6]||(t[6]=e("label",{for:"floating_title",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Title",-1))]),e("div",J,[e("div",K,[t[7]||(t[7]=e("label",{for:"message",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Description",-1)),k(e("textarea",{id:"message",rows:"4","onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Leave a comment..."},null,512),[[_,c.value]])])]),e("div",W,[e("div",X,[t[8]||(t[8]=e("label",{for:"extrainfo",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Extra Info",-1)),k(e("textarea",{id:"extrainfo",rows:"4","onUpdate:modelValue":t[2]||(t[2]=a=>g.value=a),class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Leave a comment..."},null,512),[[_,g.value]])])]),e("div",Y,[e("div",Z,[y(q,{"file-list":i.value,"onUpdate:fileList":t[3]||(t[3]=a=>i.value=a),"list-type":"picture-card",multiple:"","on-preview":P,"on-remove":$,"on-change":D},{default:w(()=>[y(p,null,{default:w(()=>[y(l)]),_:1})]),_:1},8,["file-list"])])]),e("div",ee,[(n(!0),d(N,null,V(m.value,(a,v)=>(n(),d("div",{key:a.id,class:"relative w-32 h-32"},[e("img",{class:"w-24 h-20 rounded",src:`/${a.image}`,alt:""},null,8,te),e("span",re,[e("span",{onClick:j=>F(a,v),class:"text-white text-xs font-bold absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},"x",8,ae)])]))),128))]),t[9]||(t[9]=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Submit",-1))],32)]),_:1},8,["modelValue","title","before-close"]),e("div",oe,[e("div",se,[e("div",{class:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4"},[t[11]||(t[11]=e("div",{class:"w-full md:w-1/2"},[e("form",{class:"flex items-center"},[e("label",{for:"simple-search",class:"sr-only"},"Search"),e("div",{class:"relative w-full"},[e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewbox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])]),e("input",{type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:""})])])],-1)),e("div",{class:"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0"},[e("button",{type:"button",onClick:U,class:"flex items-center justify-center text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"},t[10]||(t[10]=[e("svg",{class:"h-3.5 w-3.5 mr-2",fill:"currentColor",viewbox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[e("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"})],-1),C(" Add news ")]))])]),e("div",le,[e("table",de,[t[13]||(t[13]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3"},"News name"),e("th",{scope:"col",class:"px-4 py-3"},"Publish"),e("th",{scope:"col",class:"px-4 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",null,[(n(!0),d(N,null,V(A.news,(a,v)=>(n(),d("tr",{key:a.id,class:"border-b dark:border-gray-700"},[e("th",ne,Q(a.title),1),e("td",ie,[a.published==0?(n(),d("button",ue,"Published")):(n(),d("button",ce,"UnPublished"))]),e("td",ge,[e("button",{id:`${a.id}-button`,"data-dropdown-toggle":`${a.id}`,class:"inline-flex items-center p-0.5 text-sm font-medium text-center text-gray-500 hover:text-gray-800 rounded-lg focus:outline-none dark:text-gray-400 dark:hover:text-gray-100",type:"button"},t[12]||(t[12]=[e("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewbox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})],-1)]),8,pe),e("div",{id:`${a.id}`,class:"hidden z-10 w-44 bg-white rounded divide-y divide-gray-100 shadow dark:bg-gray-700 dark:divide-gray-600"},[e("ul",{class:"py-1 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":`${a.id}-button`},[e("li",null,[e("a",{href:"#",onClick:j=>T(a),class:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},"Edit",8,ye)])],8,fe),e("div",xe,[e("a",{href:"#",onClick:j=>I(a,v),class:"block py-2 px-4 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white"},"Delete",8,he)])],8,be)])]))),128))])])]),t[14]||(t[14]=e("nav",{class:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0 p-4","aria-label":"Table navigation"},[e("span",{class:"text-sm font-normal text-gray-500 dark:text-gray-400"},[C(" Showing "),e("span",{class:"font-semibold text-gray-900 dark:text-white"},"1-10"),C(" of "),e("span",{class:"font-semibold text-gray-900 dark:text-white"},"1000")]),e("ul",{class:"inline-flex items-stretch -space-x-px"},[e("li",null,[e("a",{href:"#",class:"flex items-center justify-center h-full py-1.5 px-3 ml-0 text-gray-500 bg-white rounded-l-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"},[e("span",{class:"sr-only"},"Previous"),e("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewbox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})])])]),e("li",null,[e("a",{href:"#",class:"flex items-center justify-center text-sm py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"},"1")]),e("li",null,[e("a",{href:"#",class:"flex items-center justify-center text-sm py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"},"2")]),e("li",null,[e("a",{href:"#","aria-current":"page",class:"flex items-center justify-center text-sm z-10 py-2 px-3 leading-tight text-primary-600 bg-primary-50 border border-primary-300 hover:bg-primary-100 hover:text-primary-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white"},"3")]),e("li",null,[e("a",{href:"#",class:"flex items-center justify-center text-sm py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"},"...")]),e("li",null,[e("a",{href:"#",class:"flex items-center justify-center text-sm py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"},"100")]),e("li",null,[e("a",{href:"#",class:"flex items-center justify-center h-full py-1.5 px-3 leading-tight text-gray-500 bg-white rounded-r-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"},[e("span",{class:"sr-only"},"Next"),e("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewbox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})])])])])],-1))])])])}}};export{ve as default};
